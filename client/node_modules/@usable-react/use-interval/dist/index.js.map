{"version":3,"file":"index.js","sources":["../src/index.ts","../../use-initial-render/dist/index.m.js","../../use-effect-trigger/dist/index.m.js"],"sourcesContent":["import { EffectCallback, useEffect, useRef } from 'react';\nimport { useEffectTrigger } from '@usable-react/use-effect-trigger';\nimport { useInitialRender } from '@usable-react/use-initial-render';\n\n/**\n * Executes the given effect on an interval.\n */\nexport function useInterval(effect: EffectCallback, deps: readonly any[], interval = 1000) {\n  const savedCallback = useRef(effect);\n  const isInitialRender = useInitialRender();\n  const isCleared = useRef(false);\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = effect;\n  }, [effect]);\n\n  // Set up the interval.\n  const triggerInterval = useEffectTrigger(() => {\n    if (!isInitialRender && !isCleared.current) return savedCallback.current();\n    return undefined;\n  }, [...deps]);\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      triggerInterval();\n    }, interval);\n    return () => clearTimeout(id);\n  }, [triggerInterval, interval]);\n\n  const clear = () => {\n    isCleared.current = true;\n  };\n\n  return clear;\n}\n","import{useRef as r,useEffect as t}from\"react\";function n(){var n=r(!0);return t(function(){n.current=!1},[]),n.current}export{n as useInitialRender};\n//# sourceMappingURL=index.m.js.map\n","import{useRef as r,useEffect as n,useState as t,useCallback as c}from\"react\";function u(u,o){void 0===o&&(o=[]);var e,i,f,a=t(0),m=a[0],p=a[1],v=(i=e=m,f=r(),n(function(){f.current=i}),f.current!==e),d=r(u);return n(function(){d.current=u},[u]),n(function(){if(v)return d.current()},[m].concat(o)),c(function(){return p(m+1)},[m])}export{u as useEffectTrigger};\n//# sourceMappingURL=index.m.js.map\n"],"names":["effect","deps","interval","isInitialRender","savedCallback","useRef","useEffect","current","isCleared","triggerInterval","useState","trigger","setTrigger","didTriggerUpdate","useCallback","useEffectTrigger","id","setTimeout","clearTimeout"],"mappings":"oDAO4BA,EAAwBC,EAAsBC,YAAAA,IAAAA,EAAW,KACnF,ICDMC,EDCAC,EAAgBC,SAAOL,GACvBG,GCFAA,EAAkBE,UAAAA,GACxBC,YAAU,WACRH,EAAgBI,SAAAA,GACf,IACIJ,EAAgBI,SDDjBC,EAAYH,UAAO,GAGzBC,YAAU,WACRF,EAAcG,QAAUP,GACvB,CAACA,IAGJ,IAAMS,WEHyBT,EAAwBC,QAAAA,IAAAA,IAAAA,EAAuB,IAAA,YAChDS,WAAS,GAAhCC,EAAAA,EAAAA,GAASC,EAAAA,EAAAA,GACVC,GAAAA,IAA8BF,EAAAA,EAAAA,WAAAA,YAAAA,WAAAA,EAAAA,QAAAA,IAAAA,EAAAA,aAC9BP,EAAgBC,SAAOL,GAc7B,OAZAM,YAAU,WACRF,EAAcG,QAAUP,GACvB,CAACA,IAEJM,YAAU,WACR,GAAIO,EACF,OAAOT,EAAcG,WAAAA,CAIrBI,GAAAA,OAAYV,IAETa,cAAY,WAAA,OAAMF,EAAWD,EAAU,IAAI,CAACA,IFd3BI,CAAiB,WACvC,IAAKZ,IAAoBK,EAAUD,QAAS,OAAOH,EAAcG,qBAE5DN,IAaP,OAXAK,YAAU,WACR,IAAMU,EAAKC,WAAW,WACpBR,KACCP,GACH,yBAAagB,aAAaF,KACzB,CAACP,EAAiBP,IAEP,WACZM,EAAUD,SAAU"}