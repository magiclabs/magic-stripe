import{useRef as t,useEffect as e,useState as n,useCallback as r,useMemo as o}from"react";import{createHash as i}from"crypto";function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var c,s,u=(function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(2),i=n(8),a=n(0),c=function(){function t(e,n){var r=n.location,o=void 0===r?0:r,a=n.distance,c=void 0===a?100:a,s=n.threshold,u=void 0===s?.6:s,l=n.maxPatternLength,f=void 0===l?32:l,h=n.caseSensitive,p=void 0!==h&&h,d=n.tokenSeparator,v=void 0===d?/ +/g:d,y=n.findAllMatches,g=void 0!==y&&y,m=n.minMatchCharLength,b=void 0===m?1:m,_=n.id,S=void 0===_?null:_,k=n.keys,x=void 0===k?[]:k,w=n.shouldSort,M=void 0===w||w,A=n.getFn,O=void 0===A?i:A,L=n.sortFn,j=void 0===L?function(t,e){return t.score-e.score}:L,C=n.tokenize,I=void 0!==C&&C,P=n.matchAllTokens,T=void 0!==P&&P,z=n.includeMatches,F=void 0!==z&&z,E=n.includeScore,B=void 0!==E&&E,R=n.verbose,N=void 0!==R&&R;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:o,distance:c,threshold:u,maxPatternLength:f,isCaseSensitive:p,tokenSeparator:v,findAllMatches:g,minMatchCharLength:b,id:S,keys:x,includeMatches:F,includeScore:B,shouldSort:M,getFn:O,sortFn:j,verbose:N,tokenize:I,matchAllTokens:T},this.setCollection(e)}var e;return(e=[{key:"setCollection",value:function(t){return this.list=t,t}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(t,'"'));var n=this._prepareSearchers(t),r=n.tokenSearchers,o=n.fullSearcher,i=this._search(r,o),a=i.weights,c=i.results;return this._computeScore(a,c),this.options.shouldSort&&this._sort(c),e.limit&&"number"==typeof e.limit&&(c=c.slice(0,e.limit)),this._format(c)}},{key:"_prepareSearchers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)e.push(new o(n[r],this.options));return{tokenSearchers:e,fullSearcher:new o(t,this.options)}}},{key:"_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=this.list,r={},o=[];if("string"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:"",value:n[i],record:i,index:i},{resultMap:r,results:o,tokenSearchers:t,fullSearcher:e});return{weights:null,results:o}}for(var c={},s=0,u=n.length;s<u;s+=1)for(var l=n[s],f=0,h=this.options.keys.length;f<h;f+=1){var p=this.options.keys[f];if("string"!=typeof p){if(c[p.name]={weight:1-p.weight||1},p.weight<=0||p.weight>1)throw new Error("Key weight has to be > 0 and <= 1");p=p.name}else c[p]={weight:1};this._analyze({key:p,value:this.options.getFn(l,p),record:l,index:s},{resultMap:r,results:o,tokenSearchers:t,fullSearcher:e})}return{weights:c,results:o}}},{key:"_analyze",value:function(t,e){var n=t.key,r=t.arrayIndex,o=void 0===r?-1:r,i=t.value,c=t.record,s=t.index,u=e.tokenSearchers,l=void 0===u?[]:u,f=e.fullSearcher,h=void 0===f?[]:f,p=e.resultMap,d=void 0===p?{}:p,v=e.results,y=void 0===v?[]:v;if(null!=i){var g=!1,m=-1,b=0;if("string"==typeof i){this._log("\nKey: ".concat(""===n?"-":n));var _=h.search(i);if(this._log('Full text: "'.concat(i,'", score: ').concat(_.score)),this.options.tokenize){for(var S=i.split(this.options.tokenSeparator),k=[],x=0;x<l.length;x+=1){var w=l[x];this._log('\nPattern: "'.concat(w.pattern,'"'));for(var M=!1,A=0;A<S.length;A+=1){var O=S[A],L=w.search(O),j={};L.isMatch?(j[O]=L.score,g=!0,M=!0,k.push(L.score)):(j[O]=1,this.options.matchAllTokens||k.push(1)),this._log('Token: "'.concat(O,'", score: ').concat(j[O]))}M&&(b+=1)}m=k[0];for(var C=k.length,I=1;I<C;I+=1)m+=k[I];this._log("Token score average:",m/=C)}var P=_.score;m>-1&&(P=(P+m)/2),this._log("Score average:",P);var T=!this.options.tokenize||!this.options.matchAllTokens||b>=l.length;if(this._log("\nCheck Matches: ".concat(T)),(g||_.isMatch)&&T){var z=d[s];z?z.output.push({key:n,arrayIndex:o,value:i,score:P,matchedIndices:_.matchedIndices}):(d[s]={item:c,output:[{key:n,arrayIndex:o,value:i,score:P,matchedIndices:_.matchedIndices}]},y.push(d[s]))}}else if(a(i))for(var F=0,E=i.length;F<E;F+=1)this._analyze({key:n,arrayIndex:F,value:i[F],record:c,index:s},{resultMap:d,results:y,tokenSearchers:l,fullSearcher:h})}}},{key:"_computeScore",value:function(t,e){this._log("\n\nComputing score:\n");for(var n=0,r=e.length;n<r;n+=1){for(var o=e[n].output,i=o.length,a=1,c=1,s=0;s<i;s+=1){var u=t?t[o[s].key].weight:1,l=(1===u?o[s].score:o[s].score||.001)*u;1!==u?c=Math.min(c,l):(o[s].nScore=l,a*=l)}e[n].score=1===c?a:c,this._log(e[n])}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(t,function(t,e){if("object"===r(e)&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e})),n=null}var o=[];this.options.includeMatches&&o.push(function(t,e){var n=t.output;e.matches=[];for(var r=0,o=n.length;r<o;r+=1){var i=n[r];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),e.matches.push(a)}}}),this.options.includeScore&&o.push(function(t,e){e.score=t.score});for(var i=0,a=t.length;i<a;i+=1){var c=t[i];if(this.options.id&&(c.item=this.options.getFn(c.item,this.options.id)[0]),o.length){for(var s={item:c.item},u=0,l=o.length;u<l;u+=1)o[u](c,s);e.push(s)}else e.push(c.item)}return e}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();t.exports=c},function(t,e,n){var r=n(3),o=n(4),i=n(7),a=function(){function t(e,n){var r=n.location,o=void 0===r?0:r,a=n.distance,c=void 0===a?100:a,s=n.threshold,u=void 0===s?.6:s,l=n.maxPatternLength,f=void 0===l?32:l,h=n.isCaseSensitive,p=void 0!==h&&h,d=n.tokenSeparator,v=void 0===d?/ +/g:d,y=n.findAllMatches,g=void 0!==y&&y,m=n.minMatchCharLength,b=void 0===m?1:m;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:o,distance:c,threshold:u,maxPatternLength:f,isCaseSensitive:p,tokenSeparator:v,findAllMatches:g,minMatchCharLength:b},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=f&&(this.patternAlphabet=i(this.pattern))}var e;return(e=[{key:"search",value:function(t){if(this.options.isCaseSensitive||(t=t.toLowerCase()),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};var e=this.options;if(this.pattern.length>e.maxPatternLength)return r(t,this.pattern,e.tokenSeparator);var n=this.options;return o(t,this.pattern,this.patternAlphabet,{location:n.location,distance:n.distance,threshold:n.threshold,findAllMatches:n.findAllMatches,minMatchCharLength:n.minMatchCharLength})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();t.exports=a},function(t,e){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(e.replace(n,"\\$&").replace(r,"|")),i=t.match(o),a=!!i,c=[];if(a)for(var s=0,u=i.length;s<u;s+=1){var l=i[s];c.push([t.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:c}}},function(t,e,n){var r=n(5),o=n(6);t.exports=function(t,e,n,i){for(var a=i.location,c=i.distance,s=void 0===c?100:c,u=i.threshold,l=i.findAllMatches,f=void 0!==l&&l,h=i.minMatchCharLength,p=void 0===h?1:h,d=void 0===a?0:a,v=t.length,y=void 0===u?.6:u,g=t.indexOf(e,d),m=e.length,b=[],_=0;_<v;_+=1)b[_]=0;if(-1!==g){var S=r(e,{errors:0,currentLocation:g,expectedLocation:d,distance:s});if(y=Math.min(S,y),-1!==(g=t.lastIndexOf(e,d+m))){var k=r(e,{errors:0,currentLocation:g,expectedLocation:d,distance:s});y=Math.min(k,y)}}g=-1;for(var x=[],w=1,M=m+v,A=1<<(m<=31?m-1:30),O=0;O<m;O+=1){for(var L=0,j=M;L<j;)r(e,{errors:O,currentLocation:d+j,expectedLocation:d,distance:s})<=y?L=j:M=j,j=Math.floor((M-L)/2+L);M=j;var C=Math.max(1,d-j+1),I=f?v:Math.min(d+j,v)+m,P=Array(I+2);P[I+1]=(1<<O)-1;for(var T=I;T>=C;T-=1){var z=T-1,F=n[t.charAt(z)];if(F&&(b[z]=1),P[T]=(P[T+1]<<1|1)&F,0!==O&&(P[T]|=(x[T+1]|x[T])<<1|1|x[T+1]),P[T]&A&&(w=r(e,{errors:O,currentLocation:z,expectedLocation:d,distance:s}))<=y){if(y=w,(g=z)<=d)break;C=Math.max(1,2*d-g)}}if(r(e,{errors:O+1,currentLocation:d,expectedLocation:d,distance:s})>y)break;x=P}return{isMatch:g>=0,score:0===w?.001:w,matchedIndices:o(b,p)}}},function(t,e){t.exports=function(t,e){var n=e.errors,r=e.currentLocation,o=e.expectedLocation,i=e.distance,a=void 0===i?100:i,c=(void 0===n?0:n)/t.length,s=Math.abs((void 0===o?0:o)-(void 0===r?0:r));return a?c+s/a:s?1:c}},function(t,e){t.exports=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=-1,i=0,a=t.length;i<a;i+=1){var c=t[i];c&&-1===r?r=i:c||-1===r||((o=i-1)-r+1>=e&&n.push([r,o]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}},function(t,e){t.exports=function(t){for(var e={},n=t.length,r=0;r<n;r+=1)e[t.charAt(r)]=0;for(var o=0;o<n;o+=1)e[t.charAt(o)]|=1<<n-o-1;return e}},function(t,e,n){var r=n(0);t.exports=function(t,e){return function t(e,n,o){if(n){var i=n.indexOf("."),a=n,c=null;-1!==i&&(a=n.slice(0,i),c=n.slice(i+1));var s=e[a];if(null!=s)if(c||"string"!=typeof s&&"number"!=typeof s)if(r(s))for(var u=0,l=s.length;u<l;u+=1)t(s[u],c,o);else c&&t(s,c,o);else o.push(s.toString())}else o.push(e);return o}(t,e,[])}}])}(s={exports:{}}),s.exports),l=(c=u)&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c;function f(n){return r=n,o=t(),e(function(){o.current=r}),o.current!==n;var r,o}function h(t){var e,n,r,o,a,c=i("md5");return(0,(e=c,n=[],r=function(t){e.update&&e.update(t,"utf8"),e.write(t,"utf8")},o=function(t){a["_"+(null===t?"null":typeof t)](t)},a={_object:function(t){var e=Object.prototype.toString.call(t),i=/\[object (.*)\]/i.exec(e),c=i?i[1].toLowerCase():("unknown:["+e+"]").toLowerCase(),s=n.indexOf(t);if(s>=0&&o("[CIRCULAR:"+s+"]"),n.push(t),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t)&&(r("buffer:"),r(t.toString("hex"))),"object"!==c&&"function"!==c&&"asyncfunction"!==c)a["_"+c]?a["_"+c](t):r("["+c+"]");else{var u=Object.keys(t).sort().splice(0,0,"prototype","__proto__","constructor");r("object:"+u.length+":"),u.forEach(function(t){o(t),r(":"),r(",")})}},_array:function(t){r("array:"+t.length+":"),t.forEach(o)},_date:function(t){r("date:"+t.toJSON())},_symbol:function(t){r("symbol:"+t.toString())},_error:function(t){r("error:"+t.toString())},_boolean:function(t){r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(t){var e;r("fn:"),"function"==typeof(e=t)&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))?o("[native]"):o(t.toString()),o("function-name:"+String(t.name)),this._object(t)},_number:function(t){r("number:"+t.toString())},_xml:function(t){r("xml:"+t.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(t){r("regex:"+t.toString())},_uint8array:function(t){r("uint8array:"),o(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){r("uint8clampedarray:"),o(Array.prototype.slice.call(t))},_int8array:function(t){r("uint8array:"),o(Array.prototype.slice.call(t))},_uint16array:function(t){r("uint16array:"),o(Array.prototype.slice.call(t))},_int16array:function(t){r("uint16array:"),o(Array.prototype.slice.call(t))},_uint32array:function(t){r("uint32array:"),o(Array.prototype.slice.call(t))},_int32array:function(t){r("uint32array:"),o(Array.prototype.slice.call(t))},_float32array:function(t){r("float32array:"),o(Array.prototype.slice.call(t))},_float64array:function(t){r("float64array:"),o(Array.prototype.slice.call(t))},_arraybuffer:function(t){r("arraybuffer:"),o(new Uint8Array(t))},_url:function(t){r("url:"+t.toString())},_map:function(t){r("map:");var e=Array.from(t);a._array(e)},_set:function(t){r("set:");var e=Array.from(t);a._array(e)},_blob:function(){r("[blob]")},_domwindow:function(){r("domwindow")}},{dispatch:o}).dispatch)(t),c.update||c.end(""),c.digest?c.digest("hex"):c.read().toString("hex")}function p(t){var r=n(h(void 0===t?null:"")),o=r[0],i=r[1];return e(function(){t&&i(h(t))},[t]),o}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function v(i){var c=void 0===i?{}:i,s=c.needle,u=c.haystack,h=c.debounce,v=c.searchOptions,y=n([]),g=y[0],m=y[1],b=function(o){var i=d({},{tick:1e3,autoStart:!1},{},{length:0,tick:100,autoStart:!1}),a=i.length,c=i.tick,s=i.autoStart,u=n(a),l=u[0],f=u[1],h=n(s),p=h[0],v=h[1],y=t(a),g=t(c),m=t(s);e(function(){g.current=c},[c]),e(function(){y.current=a},[a]);var b=r(function(){p||m.current||(v(!0),m.current=!0)},[p]),_=r(function(){p&&v(!1)},[p]),S=r(function(){!p&&m.current&&v(!0)},[p]),k=r(function(t,e){e&&(g.current=e),t&&(y.current=t),p&&v(!1),f(t||y.current),m.current=!1},[p]);return e(function(){if(p&&l>0){var t=setTimeout(function(){f(l-g.current)},g.current);return function(){return clearTimeout(t)}}p&&0===l&&v(!1),p&&l<0&&(f(0),v(!1))},[l,p]),{start:b,pause:_,resume:S,reset:k,remaining:l,isRunning:p,length:y.current}}(),_=o(function(){return a({keys:[]},v)},[v]),S=p(u),k=p(_),x=f(s),w=f(S),M=f(k),A=function(o,i){void 0===i&&(i=[]);var a,c,s,u=n(0),l=u[0],f=u[1],h=(c=a=l,s=t(),e(function(){s.current=c}),s.current!==a),p=t(o);return e(function(){p.current=o},[o]),e(function(){if(h)return p.current()},[l].concat(i)),r(function(){return f(l+1)},[l])}(function(){var t=new l(u||[],_);s&&m(t.search(s))},[s,S,k,h]);return e(function(){!b.isRunning&&(x||w||M)&&(b.reset(h),b.start(),A())},[s,S,k,h,A]),function(n,r,o){void 0===o&&(o=[]);var i=n.remaining,a=function(n){return r=n,o=t(),e(function(){o.current=r}),o.current!==n;var r,o}(i),c=t(r);e(function(){c.current=r},[r]),e(function(){if(a&&i<=0)return c.current()},[i].concat(o))}(b,function(){return A()},[A]),g}export{v as useFilter};
//# sourceMappingURL=index.m.js.map
