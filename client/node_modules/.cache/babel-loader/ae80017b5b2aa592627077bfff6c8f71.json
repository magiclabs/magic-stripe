{"ast":null,"code":"/* eslint-disable no-underscore-dangle */\nimport { __awaiter, __generator } from \"tslib\";\nimport { SDKBase, createSDK } from '@magic-sdk/provider';\nimport localForage from 'localforage';\nimport * as memoryDriver from 'localforage-driver-memory';\nimport { IframeController } from './iframe-controller';\nimport { WebTransport } from './web-transport';\nexport * from '@magic-sdk/commons';\nexport var Magic = createSDK(SDKBase, {\n  platform: 'web',\n  sdkName: 'magic-sdk',\n  version: '4.1.1',\n  defaultEndpoint: 'https://auth.magic.link/',\n  ViewController: IframeController,\n  PayloadTransport: WebTransport,\n  configureStorage:\n  /* istanbul ignore next */\n  function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var lf;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            lf = localForage.createInstance({\n              name: 'MagicAuthLocalStorageDB',\n              storeName: 'MagicAuthLocalStorage'\n            });\n            return [4\n            /*yield*/\n            , lf.defineDriver(memoryDriver)];\n\n          case 1:\n            _a.sent();\n\n            return [4\n            /*yield*/\n            , lf.setDriver([localForage.INDEXEDDB, localForage.LOCALSTORAGE, memoryDriver._driver])];\n\n          case 2:\n            _a.sent();\n\n            return [2\n            /*return*/\n            , lf];\n        }\n      });\n    });\n  }\n});","map":{"version":3,"sources":["../../src/index.ts"],"names":[],"mappings":"AAAA;;AAEA,SAAS,OAAT,EAAkB,SAAlB,QAAmC,qBAAnC;AACA,OAAO,WAAP,MAAwB,aAAxB;AACA,OAAO,KAAK,YAAZ,MAA8B,2BAA9B;AACA,SAAS,gBAAT,QAAiC,qBAAjC;AACA,SAAS,YAAT,QAA6B,iBAA7B;AAEA,cAAc,oBAAd;AAEA,OAAO,IAAM,KAAK,GAAG,SAAS,CAAC,OAAD,EAAU;AACtC,EAAA,QAAQ,EAAE,KAD4B;AAEtC,EAAA,OAAO,EAAE,WAF6B;AAGtC,EAAA,OAAO,EAAE,OAH6B;AAItC,EAAA,eAAe,EAAE,0BAJqB;AAKtC,EAAA,cAAc,EAAE,gBALsB;AAMtC,EAAA,gBAAgB,EAAE,YANoB;AAOtC,EAAA,gBAAgB;AAAE;AAA2B,cAAA;AAAA,WAAA,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;;AACrC,YAAA,EAAE,GAAG,WAAW,CAAC,cAAZ,CAA2B;AACpC,cAAA,IAAI,EAAE,yBAD8B;AAEpC,cAAA,SAAS,EAAE;AAFyB,aAA3B,CAAL;AAKN,mBAAA,CAAA;AAAA;AAAA,cAAM,EAAE,CAAC,YAAH,CAAgB,YAAhB,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;AACA,mBAAA,CAAA;AAAA;AAAA,cAAM,EAAE,CAAC,SAAH,CAAa,CAAC,WAAW,CAAC,SAAb,EAAwB,WAAW,CAAC,YAApC,EAAkD,YAAY,CAAC,OAA/D,CAAb,CAAN,CAAA;;;AAAA,YAAA,EAAA,CAAA,IAAA;;AAEA,mBAAA,CAAA;AAAA;AAAA,cAAO,EAAP,CAAA;;;KAT2C,CAAA;AAU5C;AAjBqC,CAAV,CAAvB","sourceRoot":"","sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport { __awaiter, __generator } from \"tslib\";\nimport { SDKBase, createSDK } from '@magic-sdk/provider';\nimport localForage from 'localforage';\nimport * as memoryDriver from 'localforage-driver-memory';\nimport { IframeController } from './iframe-controller';\nimport { WebTransport } from './web-transport';\nexport * from '@magic-sdk/commons';\nexport var Magic = createSDK(SDKBase, {\n    platform: 'web',\n    sdkName: 'magic-sdk',\n    version: '4.1.1',\n    defaultEndpoint: 'https://auth.magic.link/',\n    ViewController: IframeController,\n    PayloadTransport: WebTransport,\n    configureStorage: /* istanbul ignore next */ function () { return __awaiter(void 0, void 0, void 0, function () {\n        var lf;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    lf = localForage.createInstance({\n                        name: 'MagicAuthLocalStorageDB',\n                        storeName: 'MagicAuthLocalStorage',\n                    });\n                    return [4 /*yield*/, lf.defineDriver(memoryDriver)];\n                case 1:\n                    _a.sent();\n                    return [4 /*yield*/, lf.setDriver([localForage.INDEXEDDB, localForage.LOCALSTORAGE, memoryDriver._driver])];\n                case 2:\n                    _a.sent();\n                    return [2 /*return*/, lf];\n            }\n        });\n    }); },\n});\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}