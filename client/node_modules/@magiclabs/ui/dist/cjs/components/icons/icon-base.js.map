{"version":3,"file":"icon-base.js","sources":["../../../../src/components/icons/icon-base.tsx"],"sourcesContent":["import React, { createContext, useContext, useMemo } from 'react';\nimport { Theme } from '../../libs/theme';\nimport { useTheme } from '../theme/use-theme';\nimport { classNames } from '../../libs/class-names';\nimport { forwardRefWrapper } from '../../libs/forward-ref-wrapper';\n\nimport styles from './icon-base.less';\n\n// --- Shared icon context -------------------------------------------------- //\n\ninterface IconColorContext {\n  colorA: string;\n  colorB: string;\n  opacityA: number;\n  opacityB: number;\n}\n\nconst defaultIconColorContext: IconColorContext = {\n  colorA: 'var(--mg__Icon_colorA)',\n  colorB: 'var(--mg__Icon_colorB)',\n  opacityA: 1,\n  opacityB: 1,\n};\n\nconst IconColorContext = /* @__PURE__ */ createContext<IconColorContext>(defaultIconColorContext);\n\n/**\n * Creates a React context that overrides the fallback\n * color properties of icons rendered within.\n */\nexport const IconColorProvider: React.FC<Partial<IconColorContext>> = (props) => {\n  const { children, ...otherProps } = props;\n\n  return (\n    <IconColorContext.Provider value={{ ...defaultIconColorContext, ...otherProps }}>\n      {children}\n    </IconColorContext.Provider>\n  );\n};\n\n// --- Monochrome Icons ----------------------------------------------------- //\n\ntype MonochromeSVGContents = React.FC<{\n  fill: { fill: string; fillOpacity: number };\n  stroke: { stroke: string; strokeOpacity: number };\n  theme: Theme;\n}>;\n\nexport interface MonochromeIconDefinition {\n  SVGContents: MonochromeSVGContents;\n  viewbox: [number, number, number, number];\n  color?: string | ((theme: Theme) => string);\n  opacity?: number | ((theme: Theme) => number);\n}\n\ninterface MonochromeColor {\n  color?: string;\n  opacity?: number;\n}\n\ninterface MonochromeIconBaseProps extends MonochromeColor, React.HTMLAttributes<HTMLSpanElement> {\n  type: MonochromeIconDefinition;\n  size?: number | { width?: number; height?: number };\n  disabled?: boolean;\n  inline?: boolean;\n}\n\nexport const Icon = /* @__PURE__ */ forwardRefWrapper<HTMLSpanElement, MonochromeIconBaseProps>(\n  'Icon',\n\n  { inline: true },\n\n  (props, externalRef) => {\n    const { type, color, opacity, size, disabled, inline, className, ...otherProps } = props;\n\n    const theme = useTheme();\n\n    const [viewboxX, viewboxY, viewboxWidth, viewboxHeight] = type.viewbox;\n    const propWidth = typeof size === 'number' ? size : size?.width;\n    const propHeight = typeof size === 'number' ? size : size?.height;\n    const { width, height } = useAspectRatio(type.viewbox, propWidth, propHeight);\n\n    // --- Color/opacity values\n\n    const currentColor = color ?? useDefaultValue(theme, type.color) ?? useContext(IconColorContext).colorA;\n    const currentOpacity = opacity ?? useDefaultValue(theme, type.opacity) ?? useContext(IconColorContext).opacityA;\n\n    return (\n      <span\n        className={classNames([styles.IconBase, inline && styles.inline, className])}\n        aria-hidden=\"true\"\n        {...otherProps}\n        ref={externalRef}\n      >\n        <svg\n          width={typeof size === 'number' ? size : width}\n          height={typeof size === 'number' ? size : height}\n          viewBox={`${viewboxX} ${viewboxY} ${viewboxWidth} ${viewboxHeight}`}\n          fill=\"none\"\n          stroke=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <type.SVGContents\n            fill={useSVGProps('fill', currentColor, currentOpacity)}\n            stroke={useSVGProps('stroke', currentColor, currentOpacity)}\n            theme={theme}\n          />\n        </svg>\n      </span>\n    );\n  },\n);\n\n// --- Duotone Icons -------------------------------------------------------- //\n\ntype DuotoneSVGContents = React.FC<{\n  fillA: { fill: string; fillOpacity: number };\n  fillB: { fill: string; fillOpacity: number };\n  strokeA: { stroke: string; strokeOpacity: number };\n  strokeB: { stroke: string; strokeOpacity: number };\n  theme: Theme;\n}>;\n\nexport interface DuotoneIconDefinition {\n  SVGContents: DuotoneSVGContents;\n  viewbox: [number, number, number, number];\n  colorA?: string | ((theme: Theme) => string);\n  colorB?: string | ((theme: Theme) => string);\n  opacityA?: number | ((theme: Theme) => number);\n  opacityB?: number | ((theme: Theme) => number);\n}\n\ninterface DuotoneColor {\n  colorA?: string;\n  colorB?: string;\n  opacityA?: number;\n  opacityB?: number;\n}\n\ninterface DuotoneIconBaseProps extends DuotoneColor, React.HTMLAttributes<HTMLSpanElement> {\n  type: DuotoneIconDefinition;\n  size?: number | { width?: number; height?: number };\n  disabled?: boolean;\n  inline?: boolean;\n}\n\nexport const DuotoneIcon = /* @__PURE__ */ forwardRefWrapper<HTMLSpanElement, DuotoneIconBaseProps>(\n  'DuotoneIcon',\n\n  { inline: true },\n\n  (props, externalRef) => {\n    const { type, colorA, colorB, opacityA, opacityB, size, disabled, inline, className, ...otherProps } = props;\n\n    const theme = useTheme();\n\n    const [viewboxX, viewboxY, viewboxWidth, viewboxHeight] = type.viewbox;\n    const propWidth = typeof size === 'number' ? size : size?.width;\n    const propHeight = typeof size === 'number' ? size : size?.height;\n    const { width, height } = useAspectRatio(type.viewbox, propWidth, propHeight);\n\n    // --- \"A\" color/opacity values\n\n    const currentColorA = colorA ?? useDefaultValue(theme, type.colorA) ?? useContext(IconColorContext).colorA;\n    const currentOpacityA = opacityA ?? useDefaultValue(theme, type.opacityA) ?? useContext(IconColorContext).opacityA;\n\n    // --- \"B\" color/opacity values\n\n    const currentColorB = colorB ?? useDefaultValue(theme, type.colorB) ?? useContext(IconColorContext).colorB;\n    const currentOpacityB = opacityB ?? useDefaultValue(theme, type.opacityB) ?? useContext(IconColorContext).opacityB;\n\n    return (\n      <span\n        className={classNames([styles.IconBase, inline && styles.inline, className])}\n        aria-hidden=\"true\"\n        {...otherProps}\n        ref={externalRef}\n      >\n        <svg\n          width={typeof size === 'number' ? size : width}\n          height={typeof size === 'number' ? size : height}\n          viewBox={`${viewboxX} ${viewboxY} ${viewboxWidth} ${viewboxHeight}`}\n          fill=\"none\"\n          stroke=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <type.SVGContents\n            fillA={useSVGProps('fill', currentColorA, currentOpacityA)}\n            fillB={useSVGProps('fill', currentColorB, currentOpacityB)}\n            strokeA={useSVGProps('stroke', currentColorA, currentOpacityA)}\n            strokeB={useSVGProps('stroke', currentColorB, currentOpacityB)}\n            theme={theme}\n          />\n        </svg>\n      </span>\n    );\n  },\n);\n\n// --- Utilities ------------------------------------------------------------ //\n\n/**\n * Returns a memoized value representing\n * the default icon color or opacity.\n */\nfunction useDefaultValue<T>(theme: Theme | null, resolver: T | ((theme: Theme) => T)): T {\n  return useMemo(() => (typeof resolver === 'function' ? (resolver as any)(theme) : resolver), [theme?.key]);\n}\n\n/**\n * Returns memoized SVG props for `stroke` or `fill` properties.\n */\nfunction useSVGProps(property: 'fill', color: string, opacity: number): { fill: string; fillOpacity: number };\nfunction useSVGProps(property: 'stroke', color: string, opacity: number): { stroke: string; strokeOpacity: number };\nfunction useSVGProps(property: 'stroke' | 'fill', color: string, opacity: number): any {\n  return useMemo<any>(() => ({ [property]: color, [`${property}Opacity`]: opacity }), [color, opacity]);\n}\n\n/**\n * From the given `viewbox`, calculates a\n * width and height value that respects the\n * icon's aspect ratio.\n */\nfunction useAspectRatio(viewbox: [number, number, number, number], propWidth?: number, propHeight?: number) {\n  const viewboxWidth = viewbox[2];\n  const viewboxHeight = viewbox[3];\n\n  let width = Math.ceil(propWidth ?? viewboxWidth);\n  let height = Math.ceil(propHeight ?? viewboxHeight);\n  const aspectRatio = viewboxWidth / viewboxHeight;\n\n  if (!!propWidth && !propHeight) height = Math.ceil(width / aspectRatio);\n  if (!!propHeight && !propWidth) width = Math.ceil(height * aspectRatio);\n\n  return { width, height };\n}\n"],"names":["createContext","React","forwardRefWrapper","useTheme","useContext","classNames","styles","useMemo"],"mappings":";;;;;;;;;;;;;;;AAiBA,MAAM,uBAAuB,GAAqB;IAChD,MAAM,EAAE,wBAAwB;IAChC,MAAM,EAAE,wBAAwB;IAChC,QAAQ,EAAE,CAAC;IACX,QAAQ,EAAE,CAAC;CACZ,CAAC;AAEF,MAAM,gBAAgB,mBAAmBA,mBAAa,CAAmB,uBAAuB,CAAC,CAAC;AAElG;;;;MAIa,iBAAiB,GAAwC,CAAC,KAAK;IAC1E,MAAM,EAAE,QAAQ,KAAoB,KAAK,EAApB,UAAU,iBAAK,KAAK,EAAnC,YAA2B,CAAQ,CAAC;IAE1C,QACEC,wCAAC,gBAAgB,CAAC,QAAQ,IAAC,KAAK,kCAAO,uBAAuB,GAAK,UAAU,KAC1E,QAAQ,CACiB,EAC5B;AACJ,EAAE;MA6BW,IAAI,mBAAmBC,mCAAiB,CACnD,MAAM,EAEN,EAAE,MAAM,EAAE,IAAI,EAAE,EAEhB,CAAC,KAAK,EAAE,WAAW;;IACjB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,KAAoB,KAAK,EAApB,UAAU,iBAAK,KAAK,EAAlF,uEAA0E,CAAQ,CAAC;IAEzF,MAAM,KAAK,GAAGC,iBAAQ,EAAE,CAAC;IAEzB,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,aAAa,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;IACvE,MAAM,SAAS,GAAG,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,CAAC;IAChE,MAAM,UAAU,GAAG,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,CAAC;IAClE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;;IAI9E,MAAM,YAAY,SAAG,KAAK,aAAL,KAAK,cAAL,KAAK,GAAI,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,mCAAIC,gBAAU,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC;IACxG,MAAM,cAAc,SAAG,OAAO,aAAP,OAAO,cAAP,OAAO,GAAI,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,mCAAIA,gBAAU,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC;IAEhH,QACEH,gEACE,SAAS,EAAEI,qBAAU,CAAC,CAACC,gBAAM,CAAC,QAAQ,EAAE,MAAM,IAAIA,gBAAM,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,iBAChE,MAAM,IACd,UAAU,IACd,GAAG,EAAE,WAAW;QAEhBL,iDACE,KAAK,EAAE,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,EAC9C,MAAM,EAAE,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,MAAM,EAChD,OAAO,EAAE,GAAG,QAAQ,IAAI,QAAQ,IAAI,YAAY,IAAI,aAAa,EAAE,EACnE,IAAI,EAAC,MAAM,EACX,MAAM,EAAC,MAAM,EACb,KAAK,EAAC,4BAA4B;YAElCA,wCAAC,IAAI,CAAC,WAAW,IACf,IAAI,EAAE,WAAW,CAAC,MAAM,EAAE,YAAY,EAAE,cAAc,CAAC,EACvD,MAAM,EAAE,WAAW,CAAC,QAAQ,EAAE,YAAY,EAAE,cAAc,CAAC,EAC3D,KAAK,EAAE,KAAK,GACZ,CACE,CACD,EACP;AACJ,CAAC,EACD;MAmCW,WAAW,mBAAmBC,mCAAiB,CAC1D,aAAa,EAEb,EAAE,MAAM,EAAE,IAAI,EAAE,EAEhB,CAAC,KAAK,EAAE,WAAW;;IACjB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,KAAoB,KAAK,EAApB,UAAU,iBAAK,KAAK,EAAtG,+FAA8F,CAAQ,CAAC;IAE7G,MAAM,KAAK,GAAGC,iBAAQ,EAAE,CAAC;IAEzB,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY,EAAE,aAAa,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;IACvE,MAAM,SAAS,GAAG,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,CAAC;IAChE,MAAM,UAAU,GAAG,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,CAAC;IAClE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;;IAI9E,MAAM,aAAa,SAAG,MAAM,aAAN,MAAM,cAAN,MAAM,GAAI,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,mCAAIC,gBAAU,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC;IAC3G,MAAM,eAAe,SAAG,QAAQ,aAAR,QAAQ,cAAR,QAAQ,GAAI,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,mCAAIA,gBAAU,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC;;IAInH,MAAM,aAAa,SAAG,MAAM,aAAN,MAAM,cAAN,MAAM,GAAI,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,mCAAIA,gBAAU,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAAC;IAC3G,MAAM,eAAe,SAAG,QAAQ,aAAR,QAAQ,cAAR,QAAQ,GAAI,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,mCAAIA,gBAAU,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC;IAEnH,QACEH,gEACE,SAAS,EAAEI,qBAAU,CAAC,CAACC,gBAAM,CAAC,QAAQ,EAAE,MAAM,IAAIA,gBAAM,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,iBAChE,MAAM,IACd,UAAU,IACd,GAAG,EAAE,WAAW;QAEhBL,iDACE,KAAK,EAAE,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,KAAK,EAC9C,MAAM,EAAE,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,MAAM,EAChD,OAAO,EAAE,GAAG,QAAQ,IAAI,QAAQ,IAAI,YAAY,IAAI,aAAa,EAAE,EACnE,IAAI,EAAC,MAAM,EACX,MAAM,EAAC,MAAM,EACb,KAAK,EAAC,4BAA4B;YAElCA,wCAAC,IAAI,CAAC,WAAW,IACf,KAAK,EAAE,WAAW,CAAC,MAAM,EAAE,aAAa,EAAE,eAAe,CAAC,EAC1D,KAAK,EAAE,WAAW,CAAC,MAAM,EAAE,aAAa,EAAE,eAAe,CAAC,EAC1D,OAAO,EAAE,WAAW,CAAC,QAAQ,EAAE,aAAa,EAAE,eAAe,CAAC,EAC9D,OAAO,EAAE,WAAW,CAAC,QAAQ,EAAE,aAAa,EAAE,eAAe,CAAC,EAC9D,KAAK,EAAE,KAAK,GACZ,CACE,CACD,EACP;AACJ,CAAC,EACD;AAEF;AAEA;;;;AAIA,SAAS,eAAe,CAAI,KAAmB,EAAE,QAAmC;IAClF,OAAOM,aAAO,CAAC,OAAO,OAAO,QAAQ,KAAK,UAAU,GAAI,QAAgB,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,CAAC,CAAC,CAAC;AAC7G,CAAC;AAOD,SAAS,WAAW,CAAC,QAA2B,EAAE,KAAa,EAAE,OAAe;IAC9E,OAAOA,aAAO,CAAM,OAAO,EAAE,CAAC,QAAQ,GAAG,KAAK,EAAE,CAAC,GAAG,QAAQ,SAAS,GAAG,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;AACxG,CAAC;AAED;;;;;AAKA,SAAS,cAAc,CAAC,OAAyC,EAAE,SAAkB,EAAE,UAAmB;IACxG,MAAM,YAAY,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;IAChC,MAAM,aAAa,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;IAEjC,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,aAAT,SAAS,cAAT,SAAS,GAAI,YAAY,CAAC,CAAC;IACjD,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,aAAV,UAAU,cAAV,UAAU,GAAI,aAAa,CAAC,CAAC;IACpD,MAAM,WAAW,GAAG,YAAY,GAAG,aAAa,CAAC;IAEjD,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,UAAU;QAAE,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC;IACxE,IAAI,CAAC,CAAC,UAAU,IAAI,CAAC,SAAS;QAAE,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,WAAW,CAAC,CAAC;IAExE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AAC3B;;;;;;"}