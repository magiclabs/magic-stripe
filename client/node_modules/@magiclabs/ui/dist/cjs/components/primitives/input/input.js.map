{"version":3,"file":"input.js","sources":["../../../../../src/components/primitives/input/input.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\n\nimport React, { useCallback, useState, useEffect, useRef } from 'react';\nimport { useFocus } from '@react-aria/interactions';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport composeRefs from '@seznam/compose-react-refs';\nimport { classNames } from '../../../libs/class-names';\nimport { mergeProps } from '../../../libs/merge-props';\nimport { FlexColumn, Outset, FlexRow } from '../../layout';\nimport { Icon, MonochromeIcons } from '../../icons';\nimport { useFade, useScale } from '../../../hooks/transitions';\nimport { useTheme } from '../../theme/use-theme';\nimport { forwardRefWrapper } from '../../../libs/forward-ref-wrapper';\n\nimport styles from './input.less';\n\ninterface InputProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'size' | 'prefix'> {\n  disabled?: boolean;\n  label?: string;\n  errorMessage?: string;\n  validateOnBlur?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n  prefix?: JSX.Element;\n  suffix?: JSX.Element;\n}\n\nexport const Input = /* @__PURE__ */ forwardRefWrapper<HTMLInputElement, InputProps>(\n  'Input',\n\n  { size: 'md' },\n\n  (props, externalRef) => {\n    const { id, required, disabled, label, errorMessage, validateOnBlur, size, prefix, suffix, ...otherProps } = props;\n\n    const [hasError, setHasError] = useState(!!errorMessage);\n\n    useEffect(() => {\n      setHasError(!!errorMessage);\n    }, [errorMessage]);\n\n    const onBlur = useCallback<React.FocusEventHandler<HTMLInputElement>>(\n      (e) => {\n        if (validateOnBlur) {\n          const valid = e.target.checkValidity();\n          setHasError(!valid || !!errorMessage);\n        }\n      },\n      [errorMessage],\n    );\n\n    const [isFocused, onFocusChange] = useState(false);\n    const { focusProps } = useFocus({ isDisabled: disabled, onBlur, onFocusChange });\n    const inputRef = useRef<HTMLInputElement | null>(null);\n    const focusOnInput = useCallback(() => {\n      if (inputRef.current) inputRef.current.focus();\n    }, []);\n\n    const getScaleProps = useScale();\n    const getFadeProps = useFade();\n    const theme = useTheme();\n\n    return (\n      <FlexColumn>\n        {label && (\n          <Outset bottom={8}>\n            <label htmlFor={id} className={classNames([styles.InputLabel, styles[`size_${size}`]])}>\n              <FlexRow alignItems=\"flex-end\">\n                <Outset right={3} trim=\"horizontal\">\n                  <span>{label}</span>\n                  {required && <Icon size={10} color={theme.hex.primary.base} type={MonochromeIcons.AsteriskBold} />}\n                </Outset>\n              </FlexRow>\n            </label>\n          </Outset>\n        )}\n\n        <FlexRow\n          alignItems=\"center\"\n          onClick={focusOnInput}\n          className={classNames([\n            styles.Input,\n            styles[`size_${size}`],\n            disabled && styles.disabled,\n            isFocused && styles.focus,\n            hasError && styles.hasError,\n          ])}\n        >\n          <AnimatePresence>\n            {isFocused && (\n              <motion.span\n                aria-hidden=\"true\"\n                className={styles.focusRing}\n                {...getFadeProps()}\n                transition={{ duration: 0.3 }}\n              />\n            )}\n          </AnimatePresence>\n\n          <AnimatePresence initial={false} exitBeforeEnter>\n            {prefix && (\n              <motion.div className={styles.prefix} {...getScaleProps(0.7)} key={0}>\n                {prefix}\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          <input id={id} {...mergeProps(focusProps, otherProps)} ref={composeRefs(inputRef, externalRef)} />\n\n          <AnimatePresence initial={false} exitBeforeEnter>\n            {suffix && !hasError && (\n              <motion.div className={styles.suffix} {...getScaleProps(0.7)} key={0}>\n                {suffix}\n              </motion.div>\n            )}\n\n            {hasError && (\n              <motion.div className={styles.suffix} {...getScaleProps(0.7)} key={1}>\n                <Icon type={MonochromeIcons.Exclaim} color={theme.hex.error.base} />\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </FlexRow>\n\n        {errorMessage && (\n          <Outset top={8} left={7}>\n            <span className={classNames([styles.InputErrorMessage, styles[`size_${size}`]])}>{errorMessage}</span>\n          </Outset>\n        )}\n      </FlexColumn>\n    );\n  },\n);\n"],"names":["forwardRefWrapper","useState","useEffect","useCallback","useFocus","useRef","useScale","useFade","useTheme","React","FlexColumn","Outset","classNames","styles","FlexRow","Icon","MonochromeIcons.AsteriskBold","AnimatePresence","motion","mergeProps","composeRefs","MonochromeIcons.Exclaim"],"mappings":"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"}