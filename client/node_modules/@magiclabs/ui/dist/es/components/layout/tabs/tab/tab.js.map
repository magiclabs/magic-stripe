{"version":3,"file":"tab.js","sources":["../../../../../../src/components/layout/tabs/tab/tab.tsx"],"sourcesContent":["import composeRefs from '@seznam/compose-react-refs';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { useHover } from '@react-aria/interactions';\nimport { useTheme } from '../../../theme';\nimport { classNames } from '../../../../libs/class-names';\nimport { forwardRefWrapper } from '../../../../libs/forward-ref-wrapper';\nimport { Icon, IconColorProvider, MonochromeIconDefinition } from '../../../icons';\nimport { Spacer } from '../../spacer';\n\nimport styles from './tab.less';\nimport { mergeProps } from '../../../../libs/merge-props';\n\ninterface TabProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  id: string;\n  panelID: string;\n  allTabIDs: string[];\n  index: number;\n  activateTab: (tabID: string) => void;\n  selected: boolean;\n  orientation: 'horizontal' | 'vertical';\n  size: 'sm' | 'md' | 'lg';\n  useAnimation: boolean;\n  icon?: MonochromeIconDefinition;\n}\n\nfunction getPrevTabID(tabIDs: string[], index: number) {\n  const maxIndex = tabIDs.length - 1;\n  const nextIndex = index <= 0 ? maxIndex : index - 1;\n  return tabIDs[nextIndex];\n}\n\nfunction getNextTabID(tabIDs: string[], index: number) {\n  const maxIndex = tabIDs.length - 1;\n  const nextIndex = index >= maxIndex ? 0 : index + 1;\n  return tabIDs[nextIndex];\n}\n\n/**\n * Determines a _default_ color for icons nested in a `<Tab>`.\n */\nfunction useIconColor(\n  orientation: TabProps['orientation'],\n  isHovered?: boolean,\n  isSelected?: boolean,\n): string | undefined {\n  const theme = useTheme();\n\n  if (orientation === 'horizontal') {\n    if (isHovered && !isSelected) return theme.hex.primary.darker;\n    if (isSelected) return theme.hex.secondary.base;\n    return theme.hex.tertiary.base;\n  }\n\n  return theme.hex.tertiary.base;\n}\n\nexport const Tab = /* @__PURE__ */ forwardRefWrapper<HTMLButtonElement, TabProps>('Tab', (props, externalRef) => {\n  const {\n    id,\n    panelID,\n    allTabIDs,\n    index,\n    activateTab,\n    selected,\n    orientation,\n    size,\n    useAnimation,\n    icon,\n    children,\n  } = props;\n\n  const ref = useRef<HTMLButtonElement | null>(null);\n\n  useEffect(() => {\n    // If the current tab is selected, give it focus\n    if (selected && ref.current) ref.current.focus();\n  }, [selected]);\n\n  const handleClick = useCallback<React.EventHandler<React.MouseEvent<HTMLButtonElement>>>(\n    (e) => {\n      e.preventDefault();\n      activateTab(id);\n    },\n\n    [id],\n  );\n\n  const handleKeyDown = useCallback<React.EventHandler<React.KeyboardEvent<HTMLButtonElement>>>(\n    (e) => {\n      const prevTabID = getPrevTabID(allTabIDs, index);\n      const nextTabID = getNextTabID(allTabIDs, index);\n\n      const handleTabChange = (tabID: string) => {\n        e.preventDefault();\n        activateTab(tabID);\n      };\n\n      const handleArrowKey = (assertOrientation: typeof orientation, tabID: string) => {\n        if (orientation === assertOrientation) {\n          handleTabChange(tabID);\n        }\n      };\n\n      switch (e.key) {\n        case 'ArrowRight':\n          handleArrowKey('horizontal', nextTabID);\n          break;\n\n        case 'ArrowLeft':\n          handleArrowKey('horizontal', prevTabID);\n          break;\n\n        case 'ArrowUp':\n          handleArrowKey('vertical', prevTabID);\n          break;\n\n        case 'ArrowDown':\n          handleArrowKey('vertical', nextTabID);\n          break;\n\n        case 'Home':\n          handleTabChange(allTabIDs[0]);\n          break;\n\n        case 'End':\n          handleTabChange(allTabIDs[allTabIDs.length - 1]);\n          break;\n\n        case 'Delete': // We currently don't handle the 'Delete' case...\n        default:\n          break;\n      }\n    },\n\n    [allTabIDs, index, orientation],\n  );\n\n  const { isHovered, hoverProps } = useHover({ isDisabled: false });\n  const iconColor = useIconColor(orientation, isHovered, selected);\n\n  return (\n    <IconColorProvider colorA={iconColor}>\n      <button\n        className={classNames([\n          styles.Tab,\n          styles[`size_${size}`],\n          selected && styles.selected,\n          styles[orientation],\n          useAnimation && styles.withAnimation,\n        ])}\n        id={id}\n        type=\"button\"\n        role=\"tab\"\n        aria-selected={selected}\n        aria-controls={panelID}\n        tabIndex={selected ? 0 : -1}\n        {...mergeProps(hoverProps, {\n          onClick: handleClick,\n          onKeyDown: handleKeyDown,\n        })}\n        ref={composeRefs(ref, externalRef)}\n      >\n        {icon && (\n          <>\n            <Icon className={styles.icon} size={size === 'sm' ? 20 : 24} type={icon} />\n            <Spacer size={8} />\n          </>\n        )}\n\n        {children}\n      </button>\n    </IconColorProvider>\n  );\n});\n"],"names":["styles"],"mappings":"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"}